/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2025 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

/**
******************************************************************************
* @file           : main.c
* @author         : Auto-generated by STM32CubeIDE
* @brief          : Main program body
******************************************************************************
* @attention
*
* Copyright (c) 2025 STMicroelectronics.
* All rights reserved.
*
* This software is licensed under terms that can be found in the LICENSE file
* in the root directory of this software component.
* If no LICENSE file comes with this software, it is provided AS-IS.
*
******************************************************************************
*/

#include <stdint.h>
#include "GPIO_Driver.h"


int main(void)
{
    RCC->AHB1ENR |= (1 << 0);
//	init_GP(PA,2,OUT,O_PP,O_HS);
//	RCC_AHBH1 |= (1 << 0);
    GPIOA->MODER &= 0xFFFFF0FF;
    GPIOA->MODER |= 0x10;
    GPIOA->OTYPER &= ~(1<<2);
//    GPIOA->OSPEEDER |= 0x2;

    GPIOA->OSPEEDER &= ~(3 << (2 * 2)); // Clear speed bits
    GPIOA->OSPEEDER |= (2 << (2 * 2)); // Set high speed

    GPIOA->ODR |= 0x4;
    while(1);

}


#include "stm32f446re.h"

int main(void)
{
    // Enable GPIOA clock
    RCC->AHB1ENR |= (1 << 0);

    // Disable debug (optional, if using PA13)
    // This is usually done via AFIO_MAPR on older STM32s or via CubeMX

    // Set PA13 as output
    GPIOA->MODER &= ~(3 << (2 * 13));  // Clear mode bits for PA13
    GPIOA->MODER |=  (1 << (2 * 13));  // Set PA13 to output mode

    // Set PA13 as push-pull
    GPIOA->OTYPER &= ~(1 << 13);

    // Set PA13 speed to high
    GPIOA->OSPEEDER &= ~(3 << (2 * 13));
    GPIOA->OSPEEDER |=  (2 << (2 * 13));

    // Set PA13 high
    GPIOA->ODR |= (1 << 13);

    while (1);
}

